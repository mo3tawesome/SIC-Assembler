CODE1	START	1000FIRST	STL	RETADRCLOOP	JSUB	RDREC	LDA	LENGTH	COMP	ZERO	JEQ	ENDFIL	JSUB	WRREC	J	CLOOPENDFIL	LDA	EOF	STA	BUFFER	LDA	THREE	STA	LENGTH	JSUB	WRREC	LDL	RETADR	RSUBEOF	BYTE	C'EOF'THREE	WORD	3ZERO	WORD	0RETADR	RESW	1LENGTH	RESW	1BUFFER	RESB	4096..	SUBROUTINE TO READ RECORD INTO BUFFER.RDREC	LDX	ZERO	LDA	ZERORLOOP	TD	INPUT	JEQ	RLOOP	RD	INPUT	COMP	ZERO	JEQ	EXIT	STCH	BUFFER,X	TIX	MAXLEN	JLT	RLOOPEXIT	STX	LENGTH	RSUBINPUT	BYTE	X'F1'MAXLEN	WORD	4096..	SUBROUTINE TO WRITE RECORD FROM BUFFER.WRREC	LDX	ZEROWLOOP	TD	OUTPUT	JEQ	WLOOP	LDCH	BUFFER,X	WD	OUTPUT	TIX	LENGTH	JLT	WLOOP	RSUBOUTPUT	BYTE	X'05'	END